(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{188:function(e,t,r){"use strict";r(54),r(20),r(41),r(14),r(10);var n=r(2),o=(r(27),r(4)),c=(r(182),r(11)),l=r(5),d=r(0);function m(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function h(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?m(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):m(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var f={name:"ExploreChart",components:{BasicChart:r(186).a},props:{period:{type:Number,required:!0},agregation:{type:Number,required:!0},offset:{type:Number,required:!0},resources:{type:Array,default:function(){return[]}},legend:{type:Boolean,default:!0}},data:function(){var e=this;return{previousResources:null,rawData:null,hasData:!0,waiting:!0,datasets:[],xAxes:[{type:"time",time:{unit:l.L[this.agregation],round:l.L[this.agregation],displayFormats:{hour:"HH:mm",week:"dd LLL yyyy",day:"dd LLL",month:"LLL yyyy"}},adapters:{date:{locale:this.$dateLocale()}},gridLines:!1,ticks:{fontColor:l.i.fontColor,fontSize:l.i.fontSize,padding:18}}],yAxes:[{display:"auto",gridLines:!1,offset:!0,ticks:{precision:0,maxTicksLimit:7,fontColor:l.i.fontColor,fontSize:l.i.fontSize,padding:18}}],tooltipTitleCallback:function(t,data){var r=Object(l.z)(e.agregation,e.period);return Object(l.g)(c.DateTime.fromISO(t[0].label).setLocale(e.$dateLocale()).toFormat(r))},tooltipLabelCallback:function(t,data){var label=data.datasets[t.datasetIndex].resource.description,symbol=data.datasets[t.datasetIndex].resourceType.symbol,r=parseFloat(t.value);if("°C"!==symbol){var n=Object(l.U)(r);return"  ".concat(label,": ").concat(n.number.toLocaleString(e.$numberLocale(),l.n)," ").concat(n.unit+symbol)}var o=r.toLocaleString(e.$numberLocale(),l.n);return"  ".concat(label,": ").concat(o," ").concat(symbol)}}},methods:{updateRawData:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function r(){var n,o,d,m,i,f,x,v,data,y,w;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:n=c.DateTime.local(),o=Object(l.x)(n,t.period,t.offset),d={from:o.from,to:o.to.plus({millisecond:1})},t.rawData=null,m=[],r.t0=regeneratorRuntime.keys(t.resources);case 6:if((r.t1=r.t0()).done){r.next=19;break}return i=r.t1.value,f=t.$store.getters.resource({resource_id:t.resources[i]}),x=t.$store.getters.resourceType(f),v=x&&"sum"===x.aggregation_function,r.next=13,t.$getReadings(t.resources[i],v?d:o,e);case 13:data=r.sent,y=null,t.$store.getters.numSites>1&&(w=t.$store.getters.sensor(f),y=t.$store.getters.site(w)),m.push(h({label:Object(l.u)(t.$i18n,f,x,y),data:data.map(l.J),yAxisID:1===t.yAxes.length?0:x.symbol,resource:f,resourceType:x,site:y},l.l[i%l.l.length])),r.next=6;break;case 19:return t.rawData=m,r.next=22,t.updateAgregation();case 22:case"end":return r.stop()}}),r)})))()},updateAgregation:function(){var e=this;return Object(o.a)(regeneratorRuntime.mark((function t(){var r,n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!==e.rawData&&0!==e.rawData.length){t.next=2;break}return t.abrupt("return");case 2:r=e.rawData.map((function(t){if(!t.resourceType)return t;var data=Object(l.d)(t.data,e.agregation,t.resourceType.aggregation_function);return h(h({},t),{},{data:data,pointRadius:1===data.length?4:0})})),n=r.reduce((function(e,t){return t.data.length>e.data.length?t:e})),o=r.map((function(e){return e===n?e:h(h({},e),{},{data:Object(l.t)(n.data,e.data)})})),e.xAxes[0].time.unit=l.L[e.agregation],e.xAxes[0].time.round=l.L[e.agregation],e.datasets=o,e.hasData=e.datasets.length>0&&e.datasets.some((function(e){return e.data.length>0})),e.$emit("currentData",{datasets:o,hasData:e.hasData});case 10:case"end":return t.stop()}}),t)})))()},reTranslate:function(){var e=this;this.datasets.forEach((function(t){e.$set(t,"label",Object(l.u)(e.$i18n,t.resource,t.resourceType,t.site))})),this.$set(this.xAxes[0].adapters.date,"locale",this.$dateLocale())},hideYTicks:function(){var e=this;this.yAxes.forEach((function(t){e.$set(t.ticks,"display",!1)}))},showYTicks:function(){var e=this;this.yAxes.forEach((function(t){e.$set(t.ticks,"display",!0)}))},updateAxes:function(){var e=this;this.resourceTypes&&(this.yAxes=this.resourceTypes.map((function(e){return e.symbol})).filter((function(symbol,i,e){return e.indexOf(symbol)===i})).map((function(symbol,i){return Object(l.T)(symbol,0===i?"right":"left","°C"!==symbol,"°C"!==symbol,symbol,i)})),this.datasets.forEach((function(t){e.$set(t,"yAxisID",t.resourceType.symbol)})),this.$store.getters.smallScreen&&this.hideYTicks())},waitForData:function(){var e=this,t=[];return this.$store.getters.hasResources||t.push(d.x),this.$store.getters.hasResourceTypes||t.push(d.y),0===t.length?(this.waiting=!1,Promise.resolve()):(this.waiting=!0,Object(l.V)(this.$store,t).then((function(){e.waiting=!1})))},forceUpdate:function(){var e=this;return this.waitForData().then((function(){e.waiting=!0,e.updateAxes(),e.updateRawData(!0).then((function(){return e.waiting=!1}),console.error)}))}},watch:{period:function(e,t){var r=this;e!==t&&this.waitForData().then((function(){r.waiting=!0,r.updateRawData().then((function(){return r.waiting=!1}),console.error)}))},offset:function(e,t){var r=this;e!==t&&this.waitForData().then((function(){r.waiting=!0,r.updateRawData().then((function(){return r.waiting=!1}),console.error)}))},resources:function(e){var t=this;this.previousResources&&JSON.stringify(e)===this.previousResources||(this.previousResources=JSON.stringify(e),this.waitForData().then((function(){t.waiting=!0,t.updateRawData().then((function(){return t.waiting=!1}),console.error)})))},agregation:function(e,t){var r=this;e!==t&&(this.waiting=!0,this.updateAgregation().then((function(){return r.waiting=!1})))},locale:function(e,t){e!==t&&this.reTranslate()},resourceTypes:function(){this.updateAxes()}},mounted:function(){var e=this;this.waitForData().then((function(){e.waiting=!0,e.updateAxes(),e.updateRawData().then((function(){return e.waiting=!1}),console.error)})),this.$store.getters.smallScreen?this.hideYTicks():this.showYTicks(),this.$store.subscribe((function(t){t.type===d.D&&(e.$store.getters.smallScreen?e.hideYTicks():e.showYTicks())}))},computed:{periodOffsetString:function(){return this.$tc("period_offsets."+l.M[this.period],this.offset,{count:this.offset})},locale:function(){return this.$store.state.locale},resourceTypes:function(){return this.$store.state.data.resourceTypes}}},x=r(13),component=Object(x.a)(f,(function(){var e=this,t=e.$createElement;return(e._self._c||t)("basic-chart",{attrs:{datasets:e.datasets,"x-axes":e.xAxes,"y-axes":e.yAxes,"tooltip-title-callback":e.tooltipTitleCallback,"tooltip-label-callback":e.tooltipLabelCallback,legend:e.legend,waiting:e.waiting,error:!e.hasData,"error-message":e.$t("global.no_data",{period:e.periodOffsetString})}})}),[],!1,null,null,null);t.a=component.exports},202:function(e,t,r){"use strict";r.r(t);r(38),r(20),r(37),r(28),r(29),r(19),r(14),r(10),r(36),r(27);var n=r(4),o=r(181),c=r(51),l={data:function(){return{basicElements:[{icon:"timeline",label:"pages.explore.title",href:"/explore"},{icon:"track_changes",label:"pages.signature.title",href:"/signature"},{icon:"map",label:"pages.map.title",href:"/map"},{icon:"adjust",label:"pages.objectives.title",href:"/objectives"},{icon:"warning",label:"pages.alerts.title",href:"/alerts"},{icon:"settings",label:"pages.settings.title",href:"/settings"}]}},computed:{isAdmin:function(){return this.$store.getters.isAdmin},elements:function(){return this.isAdmin?[{icon:"security",label:"pages.admin.title",href:"/admin"}].concat(Object(c.a)(this.basicElements)):this.basicElements}}},d=r(13),m=Object(d.a)(l,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("nav",{staticClass:"bg-naito-blue-300 text-gray-100 rounded-md shadow-lg"},[r("ul",e._l(e.elements,(function(element,i){return r("li",{key:i},[r("nuxt-link",{staticClass:"px-5 py-3 hover:bg-naito-blue-200 flex items-center outline-none",attrs:{to:element.href}},[r("i",{staticClass:"material-icons select-none mr-3",domProps:{textContent:e._s(element.icon)}}),e._v(" "),r("span",{domProps:{textContent:e._s(e.$t(element.label))}})])],1)})),0)])}),[],!1,null,null,null).exports,h=r(188),f=r(192),x=r(5),v=r(11);function y(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return w(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return w(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,l=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return c=e.done,e},e:function(e){l=!0,o=e},f:function(){try{c||null==r.return||r.return()}finally{if(l)throw o}}}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}var _={middleware:"needs-auth",head:function(){return{title:"".concat(this.$t("pages.index.title")," - Meters"),htmlAttrs:{lang:this.$store.state.locale},meta:[{hid:"description",name:"description",content:this.$t("pages.index.description")}]}},components:{AppHeader:o.a,AppMenu:m,ExploreChart:h.a,SignatureChart:f.a},mounted:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n,o,c,l,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([e.$getResources(),e.$getResourceTypes(),e.$getUser(),e.$getSensors(),e.$getSites(),e.$getAlerts(),e.$getMeteoLocations()]);case 2:if(!e.isAdmin){t.next=4;break}return t.abrupt("return");case 4:e.updateCurrentTemperatures(),r=v.DateTime.local(),n=r.minute>=35||r.minute<5,o=Math.floor(59*Math.random()),c=Math.floor(999*Math.random()),(l=r.set({minute:n?5:35,second:o,millisecond:c}))<=r&&(l=l.plus({hour:1})),d=l.diff(r),e.timeout=setTimeout((function(){e.updateCurrentTemperatures(),e.prepedTemperatureResources.length>0&&e.$store.dispatch("showMessage",{message:e.$t("pages.index.temps_updated"),isError:!1,time:2e3}),e.interval=setInterval((function(){e.updateCurrentTemperatures(),e.prepedTemperatureResources.length>0&&e.$store.dispatch("showMessage",{message:e.$t("pages.index.temps_updated"),isError:!1,time:2e3})}),v.Duration.fromObject({minutes:30}).as("milliseconds"))}),d.as("milliseconds"));case 13:case"end":return t.stop()}}),t)})))()},beforeDestroy:function(){this.timeout&&clearTimeout(this.timeout),this.interval&&clearInterval(this.interval)},data:function(){return{timeout:null,interval:null,changeState:x.h,isMenuOpen:!1,editMode:!1,currentTemperatures:{}}},methods:{manualDashUpdate:function(){var e=this;this.updateCurrentTemperatures(),Array.isArray(this.$refs.charts)&&Promise.all(this.$refs.charts.map((function(e){return e.forceUpdate()}))).then((function(){e.$store.dispatch("showMessage",{message:e.$t("pages.index.updated_manually"),isError:!1,time:2e3})}))},updateCurrentTemperatures:function(){var e=this;if(!this.isAdmin){var t=v.DateTime.local();this.prepedTemperatureResources.forEach(function(){var r=Object(n.a)(regeneratorRuntime.mark((function r(n){var o,c,l,d,m,h,f,w,_,$,C;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o=n.id,r.next=3,e.$getReadings(o,{last:3},!0);case 3:if(c=r.sent,l=c[c.length-1],e.currentTemperatures.hasOwnProperty(o)||e.$set(e.currentTemperatures,o,{value:0,read_at:"",isOld:!1,state:0,alert:0}),void 0!==e.currentTemperatures[o]){r.next=8;break}return r.abrupt("return");case 8:e.currentTemperatures[o].value="".concat(l.value.toLocaleString(e.$numberLocale(),x.o)," °C"),d=v.DateTime.fromISO(l.read_at),e.currentTemperatures[o].read_at=d.setLocale(e.$dateLocale()).toFormat("dd.LL.yy HH:mm"),e.currentTemperatures[o].isOld=t.minus(x.b)>d,m=l.value,h=c[c.length-2].value,f=c[c.length-3].value,e.currentTemperatures[o].state=m>h&&m>f?x.h.INCREASE:m<h&&m<f?x.h.DECREASE:x.h.SAME,e.currentTemperatures[o].alert=x.f.NONE,w=e.$store.getters.alerts,_=y(w),r.prev=19,_.s();case 21:if(($=_.n()).done){r.next=29;break}if((C=$.value).resource_id===o){r.next=25;break}return r.abrupt("continue",27);case 25:return m>C.max?e.currentTemperatures[o].alert=x.f.ABOVE:m<C.min&&(e.currentTemperatures[o].alert=x.f.BELOW),r.abrupt("break",29);case 27:r.next=21;break;case 29:r.next=34;break;case 31:r.prev=31,r.t0=r.catch(19),_.e(r.t0);case 34:return r.prev=34,_.f(),r.finish(34);case 37:case"end":return r.stop()}}),r,null,[[19,31,34,37]])})));return function(e){return r.apply(this,arguments)}}())}},tempValueColorClass:function(e){return this.currentTemperatures.hasOwnProperty(e)?this.currentTemperatures[e].alert===x.f.ABOVE?"text-red-600":this.currentTemperatures[e].alert===x.f.BELOW?"text-blue-600":"":""},toggleMenu:function(){this.isMenuOpen=!this.isMenuOpen},chartKey:function(e){return JSON.stringify(e)},generateName:function(e){return"explore"===e.type?this.$store.state.dataById.resources?Object(x.v)(e,this.$store.state.dataById.resources,this.$i18n):"...":"signature"===e.type?this.$store.state.dataById.sites?Object(x.w)(e,this.$store.state.dataById.sites,this.$i18n):"...":void 0},nameEdit:function(e,t,r){if(t!==r){var n=JSON.parse(JSON.stringify(this.dashboard));n.charts[e].name=r,this.$store.commit("ADD_DASHBOARD_EDIT",{dashboard:n})}},toFrontEdit:function(e){var t=JSON.parse(JSON.stringify(this.dashboard)),element=t.charts.splice(e,1);t.charts.splice(e-1,0,element[0]),this.$store.commit("ADD_DASHBOARD_EDIT",{dashboard:t})},toBackEdit:function(e){var t=JSON.parse(JSON.stringify(this.dashboard)),element=t.charts.splice(e,1);t.charts.splice(e+1,0,element[0]),this.$store.commit("ADD_DASHBOARD_EDIT",{dashboard:t})},deleteEdit:function(e){var t=JSON.parse(JSON.stringify(this.dashboard));t.charts.splice(e,1),this.$store.commit("ADD_DASHBOARD_EDIT",{dashboard:t})},undoEdit:function(){this.$store.commit("REMOVE_LAST_DASHBOARD_EDIT")},tempToggleEdit:function(e,t){if(t!==this.isTempIncluded(e)){var r=JSON.parse(JSON.stringify(this.dashboard));t?r.temps.exclude.splice(r.temps.exclude.indexOf(e),1):r.temps.exclude.push(e),this.$store.commit("ADD_DASHBOARD_EDIT",{dashboard:r})}},confirmEdit:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(JSON.stringify(e.dashboard)!==JSON.stringify(e.$store.state.data.user.dashboard)){t.next=4;break}return e.$store.dispatch("validateDashboardChanges"),e.editMode=!1,t.abrupt("return");case 4:return t.prev=4,t.next=7,e.$putUser({dashboard:JSON.stringify(e.dashboard)},e.$t("api.dashboard_updated"),3e3);case 7:e.$store.dispatch("validateDashboardChanges"),e.editMode=!1,e.updateCurrentTemperatures(),t.next=14;break;case 12:t.prev=12,t.t0=t.catch(4);case 14:case"end":return t.stop()}}),t,null,[[4,12]])})))()},isTempIncluded:function(e){return-1===this.dashboard.temps.exclude.indexOf(e)},push:function(e){this.$router.push(e).catch(x.A)}},computed:{periods:function(){return x.I},agregations:function(){return x.e},signaturePeriods:function(){return x.S},name:function(){return this.$store.getters.name},numResources:function(){return this.$store.getters.numResources},numSites:function(){return this.$store.getters.numSites},sensorAndSitParams:function(){var e=this.$numberLocale();return{sensor:"".concat(this.numResources.toLocaleString(e)," ").concat(this.$tc("pages.index.sensor",this.numResources)),site:"".concat(this.numSites.toLocaleString(e)," ").concat(this.$tc("pages.index.site",this.numSites))}},dashboard:function(){return this.editMode?this.$store.getters.dashboardEditCurrent:this.$store.getters.dashboard},temperatureResources:function(){var e=this;return this.$store.getters.resources.filter((function(t){var r=e.$store.getters.resourceType(t);return r&&"Temperature"===r.name}))},prepedTemperatureResources:function(){var e=this;return this.temperatureResources.map((function(t){var r=null;if(e.$store.getters.numSites>1){var n=e.$store.getters.sensor(t);r=e.$store.getters.site(n)}return{title:Object(x.u)(e.$i18n,t,null,r),value:"... °C",id:t.id}})).filter((function(t){return e.editMode||e.isTempIncluded(t.id)}))},backClasses:function(){return["fixed","z-30","top-0","left-0","right-0","w-screen","h-screen","bg-gray-darken","transition-opacity-100","pointer-events-none"].concat(this.editMode?["opacity-1"]:["opacity-0"])},actionsClasses:function(){return["fixed","bottom-0","left-0","right-0","z-40","text-gray-100","flex","flex-col","sm:flex-row","w-full","transition-opacity-100","pointer-events-none"].concat(this.editMode?["opacity-1"]:["opacity-0"])},chartParentClasses:function(){return["bg-gray-100","rounded-md","p-4","md:p-6","mb-3","mx-auto","w-full","lg:w-2/3","xl:m-3","xl:w-fake1/2","flex","flex-col","items-center"].concat(this.editMode?["z-40"]:[])},temperatureParentClasses:function(){return["bg-gray-100","rounded-md","p-4","md:p-6","mb-3","mx-3","flex","flex-col","items-center","min-w-2/3","sm:min-w-64"].concat(this.editMode?["z-40"]:[])},chartClasses:function(){return["chart-height"].concat(this.editMode?["pointer-events-none","opacity-50"]:["pointer-events-auto","opacity-1"])},cancelClasses:function(){return["bg-gray-600","simple-action","p-4","sm:ml-auto","sm:px-8","sm:rounded-tl-md","shadow-lg-top"].concat(this.editMode?["pointer-events-auto"]:["pointer-events-none"])},confirmClasses:function(){return["bg-naito-green-200","simple-action","p-4","sm:mr-auto","sm:px-8","sm:rounded-tr-md","shadow-lg-top"].concat(this.editMode?["pointer-events-auto"]:["pointer-events-none"])},dashboardRootClasses:function(){return["flex","flex-col","xl:flex-row","xl:flex-wrap","justify-center","mb-48"]},editHasPrevious:function(){return this.$store.getters.dashboardUndoList.length>0},isAdmin:function(){return this.$store.getters.isAdmin}}},$=Object(d.a)(_,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{class:["z-10","fixed","top-0","left-0","w-screen","h-screen",e.isMenuOpen?"pointer-events-auto":"pointer-events-none"],on:{click:function(t){e.isMenuOpen=!1}}}),e._v(" "),r("app-header",{attrs:{title:e.$t("pages.index.title"),description:e.$t("pages.index.description"),back:!1}}),e._v(" "),r("section",{staticClass:"bg-gray-100 rounded-md p-4 mb-3 md:mb-6 mx-auto w-full lg:w-2/3 xl:w-3/5 flex items-center"},[r("div",{staticClass:"relative z-10"},[r("button",{staticClass:"round-action material-icons bg-naito-blue-300 text-gray-100 mr-4 p-3",attrs:{disabled:e.editMode},on:{click:e.toggleMenu}},[e._v("\n        menu\n      ")]),e._v(" "),e.isMenuOpen?r("app-menu",{staticClass:"absolute top-full whitespace-no-wrap mt-1"}):e._e()],1),e._v(" "),r("div",[r("p",{domProps:{innerHTML:e._s(e.$t("pages.index.hello",{name:e.name}))}}),e._v(" "),r("p",{staticClass:"sm:hidden",domProps:{innerHTML:e._s(e.$t("pages.index.summary_small",e.sensorAndSitParams))}}),e._v(" "),r("p",{staticClass:"hidden sm:block",domProps:{innerHTML:e._s(e.$t("pages.index.summary",e.sensorAndSitParams))}})])]),e._v(" "),r("button",{staticClass:"round-action material-icons shadow-lg bg-naito-blue-300 text-gray-100 absolute bottom-0 right-0 mb-20 sm:mb-32 mr-4 sm:mr-8 p-5 z-10",attrs:{title:e.$t("pages.index.manual_update"),disabled:e.editMode},on:{click:e.manualDashUpdate}},[e._v("\n    cached\n  ")]),e._v(" "),e.isAdmin?e._e():r("div",{staticClass:"flex flex-wrap justify-center"},e._l(e.prepedTemperatureResources,(function(t,i){return r("section",{key:i,class:e.temperatureParentClasses},[r("h2",{staticClass:"text-lg font-bold mb-2 text-center",domProps:{textContent:e._s(t.title)}}),e._v(" "),e.editMode?r("label",{staticClass:"material-checkbox text-naito-blue-300",attrs:{for:i+"-enable-input"}},[r("input",{attrs:{type:"checkbox",name:i+"-enable-input",id:i+"-enable-input"},domProps:{checked:e.isTempIncluded(t.id)},on:{change:function(r){return e.tempToggleEdit(t.id,r.target.checked)}}}),e._v(" "),r("div",{staticClass:"material-checkbox-fake material-checkbox-fake__large"})]):r("div",{staticClass:"flex w-full justify-center items-center"},[e.currentTemperatures[t.id]&&e.currentTemperatures[t.id].state===e.changeState.INCREASE?r("span",{staticClass:"mr-4 text-3xl text-red-600 twitching-arrow select-none"},[e._v("↗")]):e._e(),e._v(" "),e.currentTemperatures[t.id]&&e.currentTemperatures[t.id].state===e.changeState.DECREASE?r("span",{staticClass:"mr-4 text-3xl text-blue-600 twitching-arrow select-none"},[e._v("↙")]):e._e(),e._v(" "),r("span",{class:["text-4xl",e.tempValueColorClass(t.id)],domProps:{textContent:e._s(e.currentTemperatures[t.id]?e.currentTemperatures[t.id].value:t.value)}}),e._v(" "),e.currentTemperatures[t.id]&&e.currentTemperatures[t.id].isOld?r("button",{staticClass:"flex items-center p-4 text-3xl popup select-none",attrs:{"data-popup-show":"false","data-popup-text":e.$t("pages.index.temp_outdated",{time:e.currentTemperatures[t.id].read_at}),title:e.$t("pages.index.temp_outdated",{time:e.currentTemperatures[t.id].read_at})},on:{click:function(e){e.currentTarget.dataset.popupShow="true"},blur:function(e){e.currentTarget.dataset.popupShow="false"}}},[r("i",{staticClass:"material-icons text-orange-600"},[e._v(" warning")])]):e._e()]),e._v(" "),r("button",{staticClass:"mt-2 action bg-naito-green-200 text-gray-100 text-center",attrs:{disabled:e.editMode},domProps:{textContent:e._s(e.$t("pages.index.open_chart"))},on:{click:function(r){return e.push({name:"explore",query:{resources:t.id}})}}})])})),0),e._v(" "),r("div",{class:e.dashboardRootClasses},e._l(e.dashboard.charts,(function(t,i){return r("section",{key:e.chartKey(t),class:e.chartParentClasses},[e.editMode?r("div",{staticClass:"w-full flex mb-2"},[r("input",{staticClass:"min-w-0 flex-grow px-4 py-2 transparent-input mr-8",attrs:{"aria-label":"Name",type:"text",name:i+"-name-input",id:i+"-name-input"},domProps:{value:t.name||e.generateName(t)},on:{change:function(r){return e.nameEdit(i,t.name,r.target.value)}}}),e._v(" "),r("button",{staticClass:"w-12 h-12 bg-naito-blue-300 text-gray-100 simple-action rounded-l-md",attrs:{disabled:0===i},on:{click:function(t){return e.toFrontEdit(i)}}},[r("i",{staticClass:"material-icons text-2xl rotate-quarter xl:rotate-none"},[e._v("arrow_left")])]),e._v(" "),r("button",{staticClass:"w-12 h-12 bg-naito-blue-300 text-gray-100 simple-action",attrs:{disabled:i===e.dashboard.charts.length-1},on:{click:function(t){return e.toBackEdit(i)}}},[r("i",{staticClass:"material-icons text-2xl rotate-quarter xl:rotate-none"},[e._v("arrow_right")])]),e._v(" "),r("button",{staticClass:"w-12 h-12 bg-naito-blue-300 text-gray-100 simple-action rounded-r-md",on:{click:function(t){return e.deleteEdit(i)}}},[r("i",{staticClass:"material-icons text-lg"},[e._v("delete")])])]):r("h2",{staticClass:"text-lg font-bold mb-2 text-center",domProps:{textContent:e._s(t.name||e.generateName(t))}}),e._v(" "),"explore"===t.type?r("explore-chart",{ref:"charts",refInFor:!0,class:e.chartClasses,attrs:{period:e.periods[t.period],agregation:e.agregations[t.agregation],offset:t.offset,resources:t.resources,legend:!1}}):"signature"===t.type?r("signature-chart",{ref:"charts",refInFor:!0,class:e.chartClasses,attrs:{site:t.site,temperature:t.temperature,heater:t.heater,period:e.signaturePeriods[t.period],offset:t.offset,filter:t.filter,highlight:t.highlight,legend:!1}}):e._e(),e._v(" "),r("button",{staticClass:"mt-2 w-full sm:w-120 action bg-naito-green-200 text-gray-100 text-center",attrs:{disabled:e.editMode},domProps:{textContent:e._s(e.$t("pages.index.open_chart"))},on:{click:function(r){return e.push({name:t.type,query:t})}}})],1)})),0),e._v(" "),e.editMode?e._e():r("section",{staticClass:"fixed bottom-0 w-full sm:w-auto right-0 sm:mb-12 text-gray-100 rounded-l-md flex flex-col"},[r("button",{staticClass:"sm:rounded-l-md p-4 sm:pl-6 bg-naito-blue-300 simple-action shadow-lg-top sm:shadow-lg sm:flex-row-reverse",attrs:{disabled:0===e.dashboard.charts.length&&0===e.temperatureResources.length},on:{click:function(t){e.editMode=!0}}},[r("i",{staticClass:"material-icons text-lg mr-4 sm:mr-0 sm:ml-4"},[e._v("build")]),e._v(" "),r("span",{staticClass:"font-medium",domProps:{textContent:e._s(e.$t("pages.index.edit.title"))}})])]),e._v(" "),r("div",{class:e.backClasses}),e._v(" "),r("div",{class:e.actionsClasses},[r("button",{class:e.cancelClasses,attrs:{disabled:!e.editHasPrevious},on:{click:e.undoEdit}},[r("i",{staticClass:"material-icons text-lg mr-4"},[e._v("undo")]),e._v(" "),r("span",{domProps:{textContent:e._s(e.$t("pages.index.edit.cancel_last"))}})]),e._v(" "),r("button",{class:e.confirmClasses,on:{click:e.confirmEdit}},[r("i",{staticClass:"material-icons text-lg mr-4",domProps:{textContent:e._s(e.editHasPrevious?"done_all":"close")}}),e._v(" "),r("span",{domProps:{textContent:e._s(e.$t(e.editHasPrevious?"pages.index.edit.confirm_all":"pages.index.edit.quit"))}})])])],1)}),[],!1,null,null,null);t.default=$.exports}}]);